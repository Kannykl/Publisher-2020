{% extends "publications_table/main.html" %}
{% load crispy_forms_tags %}
{% block content %}
{% load widget_tweaks %}

<body>
<div class="wrapper">
    <form action="" method="get">
    {% render_field form2.search class="form-control" placeholder="Поиск"%}
    <br/>
    <input type="submit" value="Найти">
  </form>
<table class="table"align="left">
  <thead>
    <tr>
      <th scope="col"><a href="{% url 'sort' 1 %}">Звание</a></th>
      <th scope="col"><a href="{% url 'sort' 2 %}">ФИО</a></th>
      <th scope="col"><a href="{% url 'sort' 3 %}">Должность</a></th>
      <th scope="col"><a href="{% url 'sort' 4 %}">Название</a></th>
      <th scope="col"><a href="{% url 'sort' 5 %}">Издание</a></th>
      <th scope="col"><a href="{% url 'sort' 6 %}">Год публикации</a></th>
      <th scope="col"><a href="{% url 'sort' 7 %}">Тип публикации</a></th>
      <th scope="col"><a href="{% url 'sort' 8 %}">Диапазон</a></th>
      <th scope="col"><a href="{% url 'sort' 9 %}">Номер УК</a></th>
    </tr>
  </thead>
  <tbody>
  {% if publications.all %}
    {% for publication in publications%}
      <tr>
          {% for author in publication.authors.all %}
            <td>{{author.military_rank}}</td>
            <td>{{author.get_initials}}</td>
            <td>{{author.work_position}}</td>
          {% endfor %}
        <td>{{publication.title}}</td>
        <td>{{publication.edition}}</td>
        <td>{{publication.published_year}}</td>
        <td>{{publication.type_of_publication}}</td>
        <td>{{publication.range}}</td>
        <td>{{publication.uk_number}}</td>
        <td><a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'publication-update' publication.id %}">Update</a></td>
        <td><a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'publication-delete' publication.id %}">Delete</a></td>
      </tr>
    {% endfor %}
      {% endif %}
  </tbody>
</table>
  <form action="" method="get">
    {% render_field form.min_year class="form-control" placeholder="c:"%}
    <br/>
    {% render_field form.max_year class="form-control" placeholder="по:"%}
    <br/>
    {% render_field form.rank class="list"%}
  <input type="submit" value="Фильтр">
</form>
</div>
</body>
{% endblock content %}

